import React, { useEffect, useState, useRef } from "react";
import axios from "axios";
import { useNavigate } from "react-router-dom";
import { io } from "socket.io-client";
import styled from "styled-components";
import { allUsersRoute, host } from "../utils/APIRoutes";
import ChatContainer from "../components/ChatContainer";
import Contacts from "../components/Contacts";
import Welcome from "../components/Welcome";

export default function Chat() {
  const navigate = useNavigate();
  const socket = useRef();
  const [contacts, setContacts] = useState([]);
  const [currentChat, setCurrentChat] = useState(undefined);
  const [currentUser, setCurrentUser] = useState(undefined);
  console.log(localStorage.getItem(process.env.REACT_APP_LOCALHOST_KEY));
  useEffect(() => {
    if (!localStorage.getItem(process.env.REACT_APP_LOCALHOST_KEY)) {
      navigate("/login");
    } else {
      setCurrentUser(
        JSON.parse(localStorage.getItem(process.env.REACT_APP_LOCALHOST_KEY))
      );
    }
  }, []);
  useEffect(() => {
    if (currentUser) {
      socket.current = io(host);
      socket.current.emit("add-user", currentUser._id);
    }
  }, [currentUser]);

  useEffect(() => {
    if (currentUser) {
      //   if (currentUser.isAvatarImageSet) {
      if (currentUser) {
        // const data = await axios.get(`${allUsersRoute}/${currentUser.id}`);
        const data = [
          {
            _id: "6395ff6602a757d6945c9528",
            username: "kuldeep",
            email: "kuldeepy10459@gmail.com",
            avatarImage:
              "PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMzEgMjMxIj48cGF0aCBkPSJNMzMuODMsMzMuODNhMTE1LjUsMTE1LjUsMCwxLDEsMCwxNjMuMzQsMTE1LjQ5LDExNS40OSwwLDAsMSwwLTE2My4zNFoiIHN0eWxlPSJmaWxsOiMwMGEwOGQ7Ii8+PHBhdGggZD0ibTExNS41IDUxLjc1YTYzLjc1IDYzLjc1IDAgMCAwLTEwLjUgMTI2LjYzdjE0LjA5YTExNS41IDExNS41IDAgMCAwLTUzLjcyOSAxOS4wMjcgMTE1LjUgMTE1LjUgMCAwIDAgMTI4LjQ2IDAgMTE1LjUgMTE1LjUgMCAwIDAtNTMuNzI5LTE5LjAyOXYtMTQuMDg0YTYzLjc1IDYzLjc1IDAgMCAwIDUzLjI1LTYyLjg4MSA2My43NSA2My43NSAwIDAgMC02My42NS02My43NSA2My43NSA2My43NSAwIDAgMC0wLjA5OTYxIDB6IiBzdHlsZT0iZmlsbDojQ0M5ODVBOyIvPjxwYXRoIGQ9Im0xMTUuNSAyMzFhMTE1IDExNSAwIDAgMCA2NC4yMy0xOS41IDExNC43OSAxMTQuNzkgMCAwIDAtMzgtMTYuNWwtMi40MS05YTEyNS4xOSAxMjUuMTkgMCAwIDAtMTMuMzItMi4yOHY4Ljc1cTMuNTIgMC4zMiA3IDAuODRsLTE3LjUgMTcuNDgtMTcuNS0xNy40OHEzLjQ1LTAuNTIgNy0wLjg0di04Ljc1YTEyNS41NSAxMjUuNTUgMCAwIDAtMTMuMzQgMi4yOGwtMi40MSA5YTExNC43OSAxMTQuNzkgMCAwIDAtMzggMTYuNSAxMTQuOTQgMTE0Ljk0IDAgMCAwIDY0LjI1IDE5LjV6IiBzdHlsZT0iZmlsbDojMEQwMDQ2OyIvPjxwYXRoIGQ9Im0xMzIuOTggMTkzLjMzLTM2LjE4NSAzNi4xNTUtMi40LTAuNDIgMzYuMTA4LTM2LjA4MXoiIHN0eWxlPSJmaWxsOiNmZmNlNzM7Ii8+PHBhdGggZD0ibTExNS41IDUxLjc1Yy0zOC43MDIgNS4zMTAxLTU0LjIxNSAxOC4wMzgtNTkuODYzIDM1LjEwMSIgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLXdpZHRoOjEyO3N0cm9rZTojMDA0RTRDOyIvPjxwYXRoIGQ9Im0xMTUuNSA1MS43NWMtNy44MzkzIDMuNjMzNy01LjU5NzQgMTYuNTgzLTE0LjM0MSAyMy40NTIiIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS13aWR0aDoxMjtzdHJva2U6IzAwNEU0QzsiLz48cGF0aCBkPSJtMTExLjM1IDQ4LjYxNGMtMjIuNjM0LTYuOTE4MS00Mi40NTctMy4xOTg4LTU1LjczMyAyLjUxMDUiIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS13aWR0aDoxMjtzdHJva2U6IzAwNEU0QzsiLz48cGF0aCBkPSJtMTE1LjQ3IDU0LjAwOGMwLjE5NjUtNi43Nzc0LTAuMTQzNi0yNi4zMDkgMC4wNS0zOC4xODQiIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS13aWR0aDoxMjtzdHJva2U6IzAwNEU0QzsiLz48cGF0aCBkPSJtNjguODc0IDI4LjE3N2MzNC4xMTUtMy4zODIgNDEuOTg3IDEzLjMyMSA0NS4xNyAxOS42MDIiIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS13aWR0aDoxMjtzdHJva2U6IzAwNEU0QzsiLz48cGF0aCBkPSJtMTE2LjQ5IDQ4LjY5YzIuODg3Ni02LjMwMTkgMTAuMzU4LTIxLjUxOCA0My40NjktMjIuMzI2IiBzdHlsZT0iZmlsbDpub25lO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6MTI7c3Ryb2tlOiMwMDRFNEM7Ii8+PHBhdGggZD0ibTExNi45MiA1MS43NjZjMS41MDk0IDYuMzk5MSAzLjQ5ODggMTUuNTk1IDEwLjA4OCAyMy4wNTgiIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS13aWR0aDoxMjtzdHJva2U6IzAwNEU0QzsiLz48cGF0aCBkPSJtMTEzLjgxIDUxLjUzMmMyMi4wMy03Ljg2NzQgNDYuNzA5LTcuMzYxNCA1OS40NDQtMi4wNDY1IiBzdHlsZT0iZmlsbDpub25lO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6MTI7c3Ryb2tlOiMwMDRFNEM7Ii8+PHBhdGggZD0ibTExNC41MyA1Mi4yNzhjMzYuMjI2IDQuODU4MyA1Mi40MTQgMTcuMDkyIDU5LjM3MyAzMy4zNDciIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS13aWR0aDoxMjtzdHJva2U6IzAwNEU0QzsiLz48cGF0aCBkPSJtNTUuNjM3IDg2Ljg1MWMtNC4xMjEzIDEyLjQ1Mi0yLjk4NzcgMjcuMjEzLTEuNzc3IDQzLjA4NCIgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLXdpZHRoOjEyO3N0cm9rZTpub25lOyIvPjxwYXRoIGQ9Im01NS42MTQgNTEuMTI0Yy0xMy40MjIgNS41MDE5LTIxLjkwOCAxNi40MDktMjQuNzEyIDI4Ljc3NC0xLjgzMjIgOC40NjMyLTEuOTgwOSAxOC4xNTYtMS42MDk2IDI4LjQ4NiIgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLXdpZHRoOjEyO3N0cm9rZTpub25lOyIvPjxwYXRoIGQ9Im0xNzMuMjYgNDkuNDg2YzI0LjkxNyAxMC4zOTkgMjYuNzA3IDM2LjUzNyAyNy4yMDkgNTkuNjIiIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS13aWR0aDoxMjtzdHJva2U6bm9uZTsiLz48cGF0aCBkPSJtMTczLjkgODUuNjI1YzUuNDA0MiAxMi42MjUgNS4yNDEzIDI3LjY3NSA0LjU3NDUgNDMuNTgiIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS13aWR0aDoxMjtzdHJva2U6bm9uZTsiLz48cGF0aCBkPSJtNTMuODYgMTI5LjkzYzEuMjkzIDE2Ljk1MSAyLjY3MzggMzUuMTY5LTIuMTY2NCA1My4xOTMiIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS13aWR0aDoxMjtzdHJva2U6bm9uZTsiLz48cGF0aCBkPSJtMjkuMjkyIDEwOC4zOGMwLjYxNzMgMTcuMTc3IDIuNjcyMiAzNi4xMTkgMC44MTU4IDU0LjEwOCIgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLXdpZHRoOjEyO3N0cm9rZTpub25lOyIvPjxwYXRoIGQ9Im0yMDAuNDcgMTA5LjExYzAuMzU4NiAxOC41MjktMS4yNzUxIDM2Ljk0IDEuOTIzMSA0OC45ODUiIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS13aWR0aDoxMjtzdHJva2U6bm9uZTsiLz48cGF0aCBkPSJtMTc4LjQ4IDEyOS4yYy0wLjcyNzkgMTcuMzYyLTIuMDU2MyAzNS43NDMgMi42MDExIDUzLjA5OSIgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLXdpZHRoOjEyO3N0cm9rZTpub25lOyIvPjxwYXRoIGQ9Im0xNDUuMzggOTUuNjI4Yy01LjE2MDEgMi4yNTk3LTExLjAzIDIuMjU5Ny0xNi4xOSAwbS00Ny4yOSAxLjc1YzUuMTc1NS0yLjI2OTQgMTEuMDY1LTIuMjY5NCAxNi4yNCAwIiBzdHlsZT0iZmlsbDpub25lO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NS45OTk4cHg7c3Ryb2tlOiNjYmJkYWY7Ii8+PHBhdGggZD0ibTkwLjAxNiAxMDYuMjhjLTQuNDUwNi0wLjAxMDUtNi42OTAyIDUuMzY1Ny0zLjU1MDggOC41MTk1IDMuMTM5NCAzLjE1MzkgOC41MjUyIDAuOTM4ODcgOC41MzUyLTMuNTExNyAwLjAwNjMtMi43NTIyLTIuMjIwNC00Ljk4OTgtNC45NzI3LTQuOTk2MWwtMC4wMTE3MTktMC4wMTE3MnptNDcuMjgxIDBjLTQuNDUwNi0wLjAxMDUtNi42OTAyIDUuMzY1Ny0zLjU1MDggOC41MTk1IDMuMTM5NCAzLjE1MzkgOC41MjUyIDAuOTM4ODcgOC41MzUyLTMuNTExNyA2ZS0zIC0yLjc1MjItMi4yMjA0LTQuOTg5OC00Ljk3MjctNC45OTYxbC0wLjAxMTcxLTAuMDExNzJ6IiBzdHlsZT0iZmlsbDojMDAwOyIvPjxwb2x5Z29uIHBvaW50cz0iMTIxLjYxIDE2MC43NCAxMDkuMzkgMTYwLjc0IDExNS41IDE3MS4zMSIgc3R5bGU9ImZpbGw6I2ZmOTgwOTsiLz48cGF0aCBkPSJtMTMyLjY0IDE0NC4wNmEzNC40MiAzNC40MiAwIDAgMS0zNC4yNCAwIiBzdHlsZT0iZmlsbDpub25lO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NS45OTk4cHg7c3Ryb2tlOiMwMDA7Ii8+PC9zdmc+",
          },
          {
            _id: "6395fff202a757d6945c9530",
            username: "kuldeep2",
            email: "kuldeepy10456@gmail.com",
            avatarImage:
              "PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMzEgMjMxIj48cGF0aCBkPSJNMzMuODMsMzMuODNhMTE1LjUsMTE1LjUsMCwxLDEsMCwxNjMuMzQsMTE1LjQ5LDExNS40OSwwLDAsMSwwLTE2My4zNFoiIHN0eWxlPSJmaWxsOiMwMEQwRDQ7Ii8+PHBhdGggZD0ibTExNS41IDUxLjc1YTYzLjc1IDYzLjc1IDAgMCAwLTEwLjUgMTI2LjYzdjE0LjA5YTExNS41IDExNS41IDAgMCAwLTUzLjcyOSAxOS4wMjcgMTE1LjUgMTE1LjUgMCAwIDAgMTI4LjQ2IDAgMTE1LjUgMTE1LjUgMCAwIDAtNTMuNzI5LTE5LjAyOXYtMTQuMDg0YTYzLjc1IDYzLjc1IDAgMCAwIDUzLjI1LTYyLjg4MSA2My43NSA2My43NSAwIDAgMC02My42NS02My43NSA2My43NSA2My43NSAwIDAgMC0wLjA5OTYxIDB6IiBzdHlsZT0iZmlsbDojNzU1MjI3OyIvPjxwYXRoIGQ9Im04OC4xOCAxOTQuMTFjLTQuMjA3OSAxLjAyMS04LjM1NDUgMi4yNzkyLTEyLjQyIDMuNzY5NXYyNi4wNzJhMTE1LjUgMTE1LjUgMCAwIDAgNzkuNDggMHYtMjYuMDcyYy00LjA4NTgtMS40OTA0LTguMjUyOS0yLjc0ODYtMTIuNDgtMy43Njk1djguNzA1MWMwIDkuMzg4OC03LjYxMTIgMTctMTcgMTdoLTIwLjU4Yy05LjM4ODggMC0xNy03LjYxMTItMTctMTd2LTguNzA1MXoiIHN0eWxlPSJmaWxsOiNmZjAwMDA7Ii8+PHBhdGggZD0ibTEwOC4zNyAyMi4wMTljLTYuMjY5OC0xMi44MjktMTcuMTUxLTEzLjM5Ni0xOC45NDkgMS4xNzY5LTExLjQ0OC05LjQ1ODMtMjYuMDIxLTQuNDgzLTIwLjM2MSAxMi40MjItMTIuMjUxLTcuOTI4Mi0yNC45MTkgMS43NzYxLTE3LjA3NiAyMC44NTMtMjcuMDggMi4zNjQ2LTIyLjcxNSAyNC43MjYtMTAuMTExIDMxLjQzNS05LjkwMDIgMy4zNTY2LTEwLjcwMSA5LjQwMDYtOC40NjQgMTQuNDk3IDIuNjU3NCA0Ljc4NDIgOS4wMTI2IDYuNDczNyAxMS41NDUgOS42NTE5LTYuNjI0IDAuNTk0MTktOC40MTEyIDUuNjAxMS01Ljc0MDQgOS41MTkyIDEuNjg5NiAyLjQ3ODcgNS4yNzU2IDQuMjIxOCA4LjU5NzEgNS41NDU1IDEuMDQ4NSAwLjQwNjU4IDMuNzAyIDEuMjczMiAzLjkwNTMgMi40MTgxIDAuMTg3NDQgMS4yMTU2LTYuNzg4NCAzLjAwNTUtNS43MjgxIDUuMjYxMiAwLjYwNjQ4IDEuNDIyNyAxLjc3NjQgMi43MTUxIDIuNjQ2NiAzLjcxNTYgMS4yODA3IDEuNjU5NSAxMC43NTUgOC4wMzUxIDkuNDU4MyA0LjIwNDktMS4wMjcxLTMuNzIzNC0yLjIxNDgtNy40NjgyLTMuMTQ1Ni0xMS4xOTItMS4xNjYyLTUuMzA2OS0xLjc4NjgtMTAuNzIxLTEuMTAyLTE2LjE1NiAxLjQyMjMtNS40NTUgNS4wNjktNC40MjY1IDcuNzgzNy04LjM1ODggMy41MjY0LTUuNzUwNSAyLjAyOTYtMTEuNjE0IDIuMTI0LTEzLjU3NSAwLjEwNy0xLjc4NjggMS41NDA3LTEuMTg3NiAzLjE4ODQtMS40MzM3IDQuMzg2OC0wLjY0MTk2IDcuMDA4MS0yLjExODUgOC44Mzc3LTYuMjY5OCAwLjc3MDM1LTEuOTI1OSAwLjYyMDU3LTkuNzU3OCAwLjUyNDI2LTExLjc4IDAuMzYzNzgtNC42MzI4IDQuMTgzNSAwIDYuNTQ4IDAuNjQxOTYgMy4yNjMzIDAuODg4MDUgNi44Nzk3IDAuMjEzOTkgOS4wNzMxLTIuNTAzNyAxLjc1NDctMi4zNzUzIDIuMDg2NC0yLjg4ODggNC42MTE0LTAuODAyNDUgMi42ODU2IDIuMjE0OCA0LjA5NzkgMy4xMzQ5IDcuNjkyOSAzLjI3NCA1LjU2MzcgMC4yMDMyOSA4Ljc3MzUtNi4yNjk4IDExLjMyLTUuNjM4NiAzLjUyMDEgMC44NzczNSAzLjYwNTcgNS40NTY3IDEwLjI2MSA0Ljg2ODIgMi4zODYtMC4yMDMyOSAzLjgzMDQtMC44NjY2NSA1LjQwMzItMi42NDI4IDAuODg4MDUtMC45OTUwNSAxLjk1OC0yLjUwMzcgMy40MzQ1LTIuNjIxNCAxLjQ2NTgtMC4xMTc3IDIuMzIxOCAyLjM2NDYgMy4wMDY1IDMuNDQ1MiAxLjE5MjYgMi42NzU1IDQuMDI5NSAzLjY1MTMgNi4yMzc3IDMuMzE2OCAxLjk1OC0wLjE3MTE5IDMuODU0LTEuNDExNSA1LjQyNjgtMi40NzA3IDAuOTk2NzktMC42NjEwMiAxLjgyODQtMC44MTEyOCAxLjkyNTYgMC4yMDcxIDAuMjk1OTIgMi4yMjcxIDAuMDg2MiA3LjcwMjUgMC4xNTk2IDguNDgyMSAwLjEwNTU2IDguNDYwOSA1LjM3IDEwLjU2OSAxMy4yMjMgMTAuMzMzLTAuMzE4NzEgMy43NDY0IDAuMDU4MyAxMS4yOCA1LjQzNTMgMTQuNTYyIDMuOTQ4MSAyLjc2MDQgNi42NjU3IDEuMjczMiA2LjcyOTkgNy44NTM0IDdlLTMgNi4xOTE0LTAuNDM2OTMgMTMuMDYxLTEuMjk0NiAxOC4xODktMC42OTU0NyA0LjA0NDQtMS4yNDEyIDYuNDgzOC0yLjUyNTEgMTAuMzc4LTAuNjQxOTYgMS45MTUyLTAuODEzMTUgMS45Njg3IDEuNDEyMyAxLjA2OTkgNy4xNDcyLTMuMTQ1NiAxMC41MzktMTEuNDggOC4zNTYyLTE4Ljg0Mi0wLjQzODY5LTIuMDQzNiAwLjg0NTI1LTEuNzIyNiAyLjg3ODEtMi42MTA2IDkuNTI0OC00LjIzNjMgOC4xMjY0LTExLjMzNS0wLjc1OTY3LTE0LjI3MyAxMS45ODgtMy4wOTI2IDEzLjg4Ni04LjkwMDIgNi42ODcxLTE1LjM3NSA3LjMwNzctNS45MTY4IDMuNjM3OC0xNi4xNzctMi44MDMyLTE2Ljk5MSAxMi40MjItNy4wOTM3IDUuNzM0OS0yMi4wNjItNS4xMDM2LTE4LjQ5OSA0LjE3MjgtMTIuMDM3LTUuNTYzNy0yNi4yMDMtMjEuMTIxLTE2Ljg5NCA2Ljk2NTMtMTEuMzczIDIuMDY1LTIyLjY2MS0xMi4xMDEtMTAuNzg1LTMuNDU1OS0xOC4zODItMTUuMTQtMTYuNTg0LTIzLjkwMi01LjAxOCAwLjA5NDM1LTIwLjA3NS0xNi4wMDEtMTcuNDItMTguMTQ2LTIuNTg5MnoiIHN0eWxlPSJmaWxsOiNkZTNiMDA7Ii8+PHBhdGggZD0ibTUuNDM1MyA4MC41MDJjNy40NDY4IDkuMTM3MyAxNS42MzIgOC44OTEyIDE1LjYzMiA4Ljg5MTJzLTYuMDc3MiAzLjc5ODMtNi44MzY5IDkuODc1NWMtMC43NTk2NiA2LjA4OCA0LjU1NzkgOS42Mjk1IDguMDk5NCAxMC42NDYgMy41NTIyIDEuMDA1OCA3LjA5MzctMi43OTI1IDcuMDkzNy0yLjc5MjVzLTUuODMxMiAxMC42NDYtMS41MTkzIDE1Ljk2NGM0LjMwMTIgNS4zMTc2IDExLjkwOCAzLjAzODYgMTEuOTA4IDMuMDM4NnMtNS4zMjgzIDEwLjEzMiAxLjAwNTcgMTQuMTg3YzUuODMxMiAzLjcyMzQgMTguNTQyIDcuNjcxNSAyMC41MTEgOC4yNzA2LTYuMDY2Ni05Ljc0NzItOS41NzYtMjEuMjQ5LTkuNTc2LTMzLjU3NXYtMC4wNDI4YzAtMzUuMjAxIDI4LjU0Ni02My43NDcgNjMuNzQ3LTYzLjc0NyAzNS4yMTIgMCA2My43NTggMjguNTQ2IDYzLjc1OCA2My43NDcgMCAxMi40NzYtMy41ODQzIDI0LjExNi05Ljc4OTkgMzMuOTQ5aDAuNTM0OTZzMTMuOTMxLTEuMDA1NyAxNi4yMS05LjM3MjdjMi4yNzktOC4zNTYyIDAuNzU5NjctOS44NzU2IDAuNzU5NjctOS44NzU2czEwLjYzNSAyLjAzMjkgMTMuNDE3LTcuNTk2NmwyLjc5MjYtOS42Mjk1czEwLjEzMiAwIDEwLjg5Mi03LjA4M2MwLjc1OTYzLTcuMDkzNy03LjAyOTUtMTIuNDExLTcuMDI5NS0xMi40MTFzMTEuNDU5IDAuODIzODUgMTQuNDk4LTEwLjQ1M2MxLjAxNjQtMy43NTU1IDAuODM0NTYtOC4yMTcxIDAuMTM5MS0xMi40OTctMTcuNjY1LTQxLjE2MS01OC41NjktNjkuOTk1LTEwNi4xOC02OS45OTUtMzAuNjMyIDAtNjAuMDM0IDEyLjE4Ny04MS42NzkgMzMuODMxdjAuMDEwN2MtMTMuMTcxIDEzLjE3MS0yMi44MzMgMjkuMjItMjguMzg2IDQ2LjY2eiIgc3R5bGU9ImZpbGw6bm9uZTsiLz48cGF0aCBkPSJtMTcwLjI1IDEwMGMxLjY5IDkuNjItNC43OSAyOS4yMy0yMi40IDI5LjIzLTYuODEgMC0xNS0zLjY2LTIwLjIzLTEwLTQuMzQtNS4zMy03LjU2LTEyLjg3LTYuMi0xOS40NSAxLjYzLTcuODkgNy4wNy0xMS40NSAxNC42Ny0xMi45MmE2OC4xNiA2OC4xNiAwIDAgMSAxMi41Mi0xYzEwLjc3IDAgMTkuNzggMy42MSAyMS42NCAxNC4yMnoiIHN0eWxlPSJmaWxsOiNlOTFlNjM7c3Ryb2tlLXdpZHRoOjMuOTlweDtzdHJva2U6IzAwMDsiLz48cGF0aCBkPSJtNjAuNzUgMTAwYy0xLjY5IDkuNjIgNC43OSAyOS4yMyAyMi40IDI5LjIzIDYuODEgMCAxNS0zLjY2IDIwLjIzLTEwIDQuMzQtNS4zMyA3LjU2LTEyLjg3IDYuMi0xOS40NS0xLjYzLTcuODktNy4wNy0xMS40NS0xNC42Ny0xMi45MmE2OC4xNiA2OC4xNiAwIDAgMC0xMi41Mi0xYy0xMC43NyAwLTE5Ljc4IDMuNjEtMjEuNjQgMTQuMjJ6IiBzdHlsZT0iZmlsbDojZTkxZTYzO3N0cm9rZS13aWR0aDozLjk5cHg7c3Ryb2tlOiMwMDA7Ii8+PGxpbmUgeDE9IjEwMC4yIiB4Mj0iMTMwLjgiIHkxPSI4Ny45MiIgeTI9Ijg3LjkyIiBzdHlsZT0iZmlsbDpub25lO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6My45OXB4O3N0cm9rZTojMDAwOyIvPjxwYXRoIGQ9Im0xMDkuODcgMTAxLjczYzAtMi41OSAyLjUyLTQuNjkgNS42My00LjY5czUuNjMgMi4xIDUuNjMgNC42OSIgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2Utd2lkdGg6My45OXB4O3N0cm9rZTojMDAwOyIvPjxwYXRoIGQ9Im0xMTguNTcgMTY1LjE0YTguNjYgOC42NiAwIDAgMC0yLjc2LTQuMjNoLTAuNjJhOCA4IDAgMCAwLTIuNzYgNC4yMmMtMC41MiAxLjg5IDIuMDcgMTAuNjEgMi43NiAxMi41M2gwLjYyYzAuNjQtMS43NiAzLjE5LTEwLjgyIDIuNzYtMTIuNTJ6IiBzdHlsZT0iZmlsbDojMTkxOTE5OyIvPjxwYXRoIGQ9Im0xMDIuODEgMTUyLjI0YTIuNDkyMSAyLjQ5MjEgMCAxIDEgMS4xOS00Ljg0bDAuMjEgMC4wNmEzNy4xIDM3LjEgMCAwIDAgNS40MyAxLjEyIDQ0LjUyIDQ0LjUyIDAgMCAwIDExLjc2IDAgMzcuMSAzNy4xIDAgMCAwIDUuNDMtMS4xMiAyLjQ5MDMgMi40OTAzIDAgMCAxIDEuNTkgNC43MmwtMC4yMSAwLjA2YTQzLjA4IDQzLjA4IDAgMCAxLTYuMTUgMS4yOSA0OC41NSA0OC41NSAwIDAgMS0xMy4wOCAwIDQyLjc5IDQyLjc5IDAgMCAxLTYuMTctMS4yOXoiIHN0eWxlPSJmaWxsOiMxOTE5MTk7Ii8+PC9zdmc+",
          },
          {
            _id: "639600d702a757d6945c9542",
            username: "kuldeep3",
            email: "kuldeepy10460@gmail.com",
            avatarImage:
              "PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMzEgMjMxIj48cGF0aCBkPSJNMzMuODMsMzMuODNhMTE1LjUsMTE1LjUsMCwxLDEsMCwxNjMuMzQsMTE1LjQ5LDExNS40OSwwLDAsMSwwLTE2My4zNFoiIHN0eWxlPSJmaWxsOiNhNTAwMDA7Ii8+PHBhdGggZD0ibTExNS41IDUxLjc1YTYzLjc1IDYzLjc1IDAgMCAwLTEwLjUgMTI2LjYzdjE0LjA5YTExNS41IDExNS41IDAgMCAwLTUzLjcyOSAxOS4wMjcgMTE1LjUgMTE1LjUgMCAwIDAgMTI4LjQ2IDAgMTE1LjUgMTE1LjUgMCAwIDAtNTMuNzI5LTE5LjAyOXYtMTQuMDg0YTYzLjc1IDYzLjc1IDAgMCAwIDUzLjI1LTYyLjg4MSA2My43NSA2My43NSAwIDAgMC02My42NS02My43NSA2My43NSA2My43NSAwIDAgMC0wLjA5OTYxIDB6IiBzdHlsZT0iZmlsbDojZmZjZThiOyIvPjxwYXRoIGQ9Im04OC4xOCAxOTQuMTFjLTQuMjA3OSAxLjAyMS04LjM1NDUgMi4yNzkyLTEyLjQyIDMuNzY5NXYyNi4wNzJhMTE1LjUgMTE1LjUgMCAwIDAgNzkuNDggMHYtMjYuMDcyYy00LjA4NTgtMS40OTA0LTguMjUyOS0yLjc0ODYtMTIuNDgtMy43Njk1djguNzA1MWMwIDkuMzg4OC03LjYxMTIgMTctMTcgMTdoLTIwLjU4Yy05LjM4ODggMC0xNy03LjYxMTItMTctMTd2LTguNzA1MXoiIHN0eWxlPSJmaWxsOiNmZjE0ZTQ7Ii8+PHBhdGggZD0ibTEzNy4zOCAxMS4xNDhjLTEyLjIzIDEuOTU5My0xOC41MTEgMTQuNjA2LTQzLjQzNiA5LjQ5MTUtMTEuMjg1LTMuMjA1NC0xNi40MDYtMy41NzMtMjAuMzg5IDAuNTg1OTQtNC4xNTQ4IDQuMzM4NC03LjAzMyAxMi40MzUtOS44MTg0IDIxLjcwNi0yLjEzNTQgNy40MTM2LTMuNzE4NyAxNC4zODEtNC43NDYxIDIxLjY0NmgxMTIuN2MtMy40ODc4LTI0LjI5My0xMC44MjItNDMuMjgxLTI1LjE4Mi01MS4wNjEtMy41MzE0LTEuNjIzLTYuNTI3NC0yLjI5NTktOS4xMjg5LTIuMzYxM3oiIHN0eWxlPSJmaWxsOiMzMzM7Ii8+PHBhdGggZD0ibTExNC4zNyA0My4zODNjLTE5LjQ0NSAwLjA4OC0zOC41MjQgMi4wNzI0LTUyLjM3OSA1LjY5OTItMS4yNzY2IDQuNTc5NS0yLjQzMTcgMTAuMTY5LTMuMjI4NSAxNi44MDdoMTEzLjExYy0wLjgzNzMxLTYuMDEwNy0xLjkxNjQtMTEuNjc0LTMuMzE4NC0xNi45MjQtMTUuMjI5LTMuODg0Mi0zNC44NzMtNS42NjkzLTU0LjE4LTUuNTgyeiIgc3R5bGU9ImZpbGw6I2FmYWZhZjsiLz48cGF0aCBkPSJtMTE1LjUgNTUuNzczYy01OC4zOSAwLTEwNS43MyAxNS40NzYtMTA1LjczIDM0LjU3aDAuMDMxMmMwIDExLjI5NSAxNi40OTYgMjEuMzE5IDQyLjEyNiAyNy42MjctMC4xMDMzMS03Ljc3MDQgMi43ODgtMjEuOTA0IDUuMjczNC0zMS4wMzEgNi4wOTM1LTEuNzE2OCA2LjkyOTQtMS44OTcxIDEzLjE2Ny0yLjk5MTkgMTQuODc0LTIuODI1NiAyOS45OS00LjIwMzcgNDUuMTMzLTQuMTE1MyAxNS4xNDMtMC4wODg0IDMwLjI1OSAxLjI4OTcgNDUuMTMzIDQuMTE1MyA2LjIzNzIgMS4wOTQ3IDcuMjA2NSAxLjI3NTEgMTMuMyAyLjk5MTkgMi40ODU0IDkuMTI2NyA1LjM3NjggMjMuMjYgNS4yNzM0IDMxLjAzMSAyNS42My02LjMwODIgNDEuOTkzLTE2LjMzMiA0MS45OTMtMjcuNjI3aDAuMDMxMmMwLTE5LjA5My00Ny4zNC0zNC41Ny0xMDUuNzMtMzQuNTd6IiBzdHlsZT0iZmlsbDojMjIyOyIvPjxwYXRoIGQ9Im03Mi4wODggODMuNTMzYy02Ljk3NjUgMS4xMTQ3LTEzLjM1NyAyLjg1Ni0xOC40MzkgNC4zNDc3LTEuMTg2MSA3LjQxNS0yLjAwMzggMTguODU4LTEuODkyNiAyNi4yOTMgNC4zMjc4LTAuNjI3OTUgMTAuMTU1LTEuMzY0NCAxMy4yOTUtMS42NDY1LTAuNDA1NTQgMC4zMDE5OCAyLjczNDQtMTcuODI3IDcuMDM3MS0yOC45OTR6bTg2LjgyNCAwYzQuMzAyOCAxMS4xNjcgNy40NDI2IDI5LjI5NiA3LjAzNzEgMjguOTk0IDMuMTM5NiAwLjI4MjEzIDguOTY3MSAxLjAxODUgMTMuMjk1IDEuNjQ2NSAwLjExMTE5LTcuNDM1MS0wLjcwNjUyLTE4Ljg3OC0xLjg5MjYtMjYuMjkzLTUuMDgyMi0xLjQ5MTYtMTEuNDYzLTMuMjMyOS0xOC40MzktNC4zNDc3eiIgc3R5bGU9ImZpbGw6IzZkM2ExZDsiLz48cGF0aCBkPSJtMTcwLjI1IDEwMGMxLjY5IDkuNjItNC43OSAyOS4yMy0yMi40IDI5LjIzLTYuODEgMC0xNS0zLjY2LTIwLjIzLTEwLTQuMzQtNS4zMy03LjU2LTEyLjg3LTYuMi0xOS40NSAxLjYzLTcuODkgNy4wNy0xMS40NSAxNC42Ny0xMi45MmE2OC4xNiA2OC4xNiAwIDAgMSAxMi41Mi0xYzEwLjc3IDAgMTkuNzggMy42MSAyMS42NCAxNC4yMnoiIHN0eWxlPSJmaWxsOiNjNGZmZTQ7c3Ryb2tlLXdpZHRoOjMuOTlweDtzdHJva2U6IzAwMDsiLz48cGF0aCBkPSJtNjAuNzUgMTAwYy0xLjY5IDkuNjIgNC43OSAyOS4yMyAyMi40IDI5LjIzIDYuODEgMCAxNS0zLjY2IDIwLjIzLTEwIDQuMzQtNS4zMyA3LjU2LTEyLjg3IDYuMi0xOS40NS0xLjYzLTcuODktNy4wNy0xMS40NS0xNC42Ny0xMi45MmE2OC4xNiA2OC4xNiAwIDAgMC0xMi41Mi0xYy0xMC43NyAwLTE5Ljc4IDMuNjEtMjEuNjQgMTQuMjJ6IiBzdHlsZT0iZmlsbDojYzRmZmU0O3N0cm9rZS13aWR0aDozLjk5cHg7c3Ryb2tlOiMwMDA7Ii8+PGxpbmUgeDE9IjEwMC4yIiB4Mj0iMTMwLjgiIHkxPSI4Ny45MiIgeTI9Ijg3LjkyIiBzdHlsZT0iZmlsbDpub25lO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6My45OXB4O3N0cm9rZTojMDAwOyIvPjxwYXRoIGQ9Im0xMDkuODcgMTAxLjczYzAtMi41OSAyLjUyLTQuNjkgNS42My00LjY5czUuNjMgMi4xIDUuNjMgNC42OSIgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2Utd2lkdGg6My45OXB4O3N0cm9rZTojMDAwOyIvPjxwYXRoIGQ9Im0xMjMuMDcgMTU0LjA1YTEwLjYxIDEwLjYxIDAgMCAxLTE1IDAuMTRsLTAuMTQtMC4xNCIgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLXdpZHRoOjYuM3B4O3N0cm9rZTojMDAwOyIvPjxwYXRoIGQ9Im0xMjAuMSAxNDIuMjIgMC4xOS0wLjExYzMtMS44NyA1LjQ1LTIuNCA3LjMtMS40NiAyLjE1IDEuMSAzLjEyIDMuODQgNC44NCA1LjVhNS4xOCA1LjE4IDAgMCAwIDYuNjggMC43M20tMjguMjEtNC42Ni0wLjE5LTAuMTFjLTMtMS44Ny01LjQ1LTIuNC03LjMtMS40Ni0yLjE1IDEuMS0zLjEyIDMuODQtNC44NCA1LjVhNS4xOCA1LjE4IDAgMCAxLTYuNjggMC43MyIgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLXdpZHRoOjUuOTk5OHB4O3N0cm9rZTojNGQ0ZDRkOyIvPjwvc3ZnPg==",
          },
          {
            _id: "63a34b2e6aa0ded6212d85ef",
            username: "Amit Yadav",
            email: "faizabadamit26@gmail.com",
            avatarImage: "",
          },
          {
            _id: "63a34c526aa0ded6212d85f7",
            username: "Gokul Yadav",
            email: "faizabadamit24@gmail.com",
            avatarImage: "",
          },
        ];
        setContacts(data);
      } else {
        navigate("/setAvatar");
      }
    }
  }, [currentUser]);
  const handleChatChange = (chat) => {
    setCurrentChat(chat);
  };
  return (
    <>
      <Container>
        <div className="container">
          <Contacts contacts={contacts} changeChat={handleChatChange} />
          {/* <Welcome /> */}
          {currentChat === undefined ? (
            <Welcome />
          ) : (
            <ChatContainer currentChat={currentChat} socket={socket} />
          )}
        </div>
        {/* <div>hii</div> */}
      </Container>
    </>
  );
}

const Container = styled.div`
  height: 100vh;
  width: 100vw;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 1rem;
  align-items: center;
  background-color: #131324;
  .container {
    height: 85vh;
    width: 85vw;
    background-color: #00000076;
    display: grid;
    grid-template-columns: 25% 75%;
    @media screen and (min-width: 720px) and (max-width: 1080px) {
      grid-template-columns: 35% 65%;
    }
  }
`;
